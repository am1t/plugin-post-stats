{{ $since := $.Site.Params.post_stats_since }}

{{ $posts := where site.RegularPages "Type" "post" }}

{{ $scratch := newScratch }}
{{ range $posts }}
    {{ $scratch.Add "wordcount" .WordCount }}
{{ end }}

{{ $postCount :=  len ($posts) }}
{{ $wordCount := $scratch.Get "wordcount" }}

{{ if gt $wordCount 40000 }}
    {{ $novelCount := div $wordCount 40000 }}
    <p class="post-stats">I have published <b>{{ $postCount }} posts</b> with <b>{{ $wordCount }} words</b> (that's almost {{ $novelCount }} novellas) since <em>{{ $since }}</em>.</p>
{{ else }}
    <p class="post-stats">I have published <b>{{ $postCount }} posts</b> with <b>{{ $wordCount }} words</b> since <em>{{ $since }}</em>.</p>
{{ end }}